Natural language understanding course website
=============================================

This directory contains a complete set of course material for the NLU course
at the University of Edinburgh. Much of the material was written by Mirella
Lapata, Frank Keller, and Sharon Goldwater. I moved the course to this 
jekyll repository because I find it easier to write course pages in 
markdown.

Website: Adam Lopez
Course material: Mirella Lapata, Frank Keller, Sharon Goldwater, and Adam Lopez

Building the course page for Edinburgh Informatics
--------------------------------------------------

I use this script:

    bash publish-website.sh "<Commit message>"

### What the publishing script does

The School of Informatics manages updates to the website through cvs. I 
write content in markdown for jekyll and manage everything with git. 
The script manages this interface for me. The basic idea is that I
generate a static image of the website I want using jekyll, and then 
publish that image using cvs.

The script assumes that this `nlu-class` repository lives in a 
directory containing two other directories:

1. The `nlu` directory is a git image of the cvs repository. When I build the `nlu-class` website, it writes to this directory.
1. The `web` directory is the cvs checkout of the course website. 

Create the directories like so from the *parent directory* of `nlu-class`:

    # Set $CVSROOT
    export CVSROOT=:pserver:<username>@www.inf.ed.ac.uk:/cvsroot

    # Check out both cvs and git versions of the repo
    cvs login
    cvs checkout web/teaching/courses/nlu
    git cvsimport -d $CVSROOT -C nlu -r cvs -k web/teaching/courses/nlu

    # Configure the git clone of the cvs repo
    cd nlu
    git config cvsimport.module web/teaching/courses/nlu
    git config cvsimport.r cvs
    git config cvsimport.d $CVSROOT
    
Then make changes as needed to the content of `nlu-class`. To test those
changes locally, run:

    bash test-website.sh

To publish them, run:

    bash publish-website.sh "<Commit message>"

This is not a particularly robust script. Usually if there's an error, it
helps to refresh the `nlu` and `web` directories by deleting them and checking
them out again using the process above (this is safe; their content is 
generated by scripts, so they have no source files in them). If that doesn't
fix the problem, you may need to debug by hand. Here's what `publish-website.sh`
is doing:

    # Now, I can make changes as needed in this repository. If I want
    # to preview the results locally, I just run "jekyll build". When
    # I'm ready to commit the changes to the informatics server, I build
    # using a special config file that overwrites the git copy of the
    # the class directory, and then commit it from there using the git
    # bridge to cvs, like so:
    cd nlu-class
    jekyll build --config _config4inf.yml
    cd ../nlu
    git commit -am <commit message>
    git cvsexportcommit -w ../web/teaching/courses/nlu -u -p -c HEAD^ HEAD

Much of the process was adapted from [this stackoverflow question](http://stackoverflow.com/questions/584522/how-to-export-revision-history-from-mercurial-or-git-to-cvs/#586225).

